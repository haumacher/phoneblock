<!DOCTYPE html>
<html>
<head th:replace="~{fragments/page :: head(title=#{page.setup.title})}"></head>

<body th:dir="${currentLang.direction}">
<div th:replace="~{fragments/page :: header(location=${currentPage})}"></div>

<section class="section">
	<div class="content">
		<h1 data-tx="t0001:3dfe1d89">Installation als Telefonbuch</h1>

<p data-tx="t0002:10d70c8f">
	Für die Installation der Blockliste benötigst Du einen <a th:href="@{/link/fritzbox}">"FRITZ!Box"
	Internetrouter von AVM</a> und einen PhoneBlock-Account. Es muss nicht unbedingt das neuste Modell
	sein, aber Du solltest prüfen, ob das aktuelle FRITZ!OS darauf
	installiert ist (07.29 oder neuer). Ist dies nicht der Fall, prüfe
	anhand der folgenden Installationsanleitung, ob Deine Version die notwendigen
	Optionen schon bietet.
</p>

<p data-tx="t0003:d62d702f">
	Beachte: Aufgrund technischer Beschränkungen der Fritz!Box kann nicht die gesamte Blockliste in ein
	Telefonbuch geladen werden. Daher bietet die Einrichtung eines
	<a th:href="@{/anrufbeantworter}">PhoneBlock-Anrufbeantworters</a> den
	besseren Schutz vor SPAM-Anrufen.
</p>

<p data-tx="t0052:818cc317">
	Mit folgenden Schritten richtest Du die Blockliste ein:
</p>

<ol>
	<li><a data-tx="t0053:5cb36b90" href="#register">Bei PhoneBlock anmelden</a> <span class="tag is-success" data-tx="t0054:3378b39d" th:if="${userName}">✓ Erledigt</span></li>
	<li><a data-tx="t0055:d44f7d1" href="#fritzbox">An FRITZ!Box anmelden</a></li>
	<li><a data-tx="t0056:d6fa7b4e" href="#phonebook">Neues Telefonbuch "Blocklist" erstellen</a></li>
	<li><a data-tx="t0070:958ad5cf" href="#create-token">CardDAV-Token erzeugen</a> <span class="tag is-success" data-tx="t0058:3378b39d" th:if="${cardDavToken}">✓ Erledigt</span></li>
	<li><a data-tx="t0071:9e1ea08e" href="#credentials">Anmeldedaten in Fritz!Box eintragen</a></li>
	<li><a data-tx="t0059:4f985acc" href="#verify">Installation prüfen</a></li>
	<li><a data-tx="t0060:91946e2c" href="#block">Rufsperre aktivieren</a></li>
</ol>

<h2 data-tx="t0061:e8d5bb12" id="register">Schritt 1: Bei PhoneBlock anmelden</h2>

<p data-tx="t0062:fffc269" th:unless="${userName}">
	Als erstes musst Du Dich bei PhoneBlock registrieren bzw. anmelden, um mit der Einrichtung zu beginnen.
</p>

<div class="columns" th:unless="${userName}">
  <div class="column is-half is-offset-one-quarter">
	<a th:href="@{/login(location='/setup')}">
		<button class="button is-medium is-info is-fullwidth">
			<span class="icon">
				<i class="fa-solid fa-right-to-bracket"></i>
			</span>
			<span data-tx="t0063:1dc205">Anmelden</span>
		</button>
	</a>
  </div>
</div>
<p data-tx="t0064:1a4e19e4" th:if="${userName}">
	<span class="tag is-success is-large"><i class="fa-solid fa-check"></i></span>
	Du bist bereits als <code dir="ltr" th:text="${userName}"></code> angemeldet, prima! Weiter zum nächsten Schritt.
</p>
		
		<h2 data-tx="t0065:8bf85697" id="fritzbox">Schritt 2: An FRITZ!Box anmelden</h2>

		<p data-tx="t0012:2354f60">
			Damit das funktioniert, muss Du Dich zuhause in deinem WLAN befinden, oder Dein Computer muss
			direkt mit der FRITZ!Box über Kabel verbunden sein. Die FRITZ!Box fragt Dich als erstes nach
			Deinem Passwort. Wenn Du Dich noch nie angemeldet hattest, dann findest Du dieses Passwort auf der
			Unterseite des Gerätes.
		</p>

		<div class="columns">
		  <div class="column is-half is-offset-one-quarter">
			<a href="http://fritz.box" target="_blank">
				<button class="button is-medium is-primary is-fullwidth" data-tx="t0013:d44f7d1">An FRITZ!Box anmelden</button>
			</a>
		  </div>
		</div>

		<h2 data-tx="t0066:502b2c97" id="phonebook">Schritt 3: Neues Telefonbuch "Blocklist" erstellen</h2>
		
		<p data-tx="t0015:60de307b">
			Damit Deine FRITZ!Box Spam-Anrufe blockieren kann, benötigt sie ein eigenes Telefonbuch, in das 
			alle Nummern von unerwünschten Anrufern eingetragen werden. Nenne Dieses Telefonbuch "Blocklist". 
			Hierfür
		</p>
		
		<ol>
			<li data-tx="t0016:ee677f2e">Navigiere zuerst in die Rubrik "Telefonie", </li>
			<li data-tx="t0017:bf3c833">wähle den Menüpunkt "Telefonbuch" aus und</li>
			<li data-tx="t0018:9545daeb">klicke dann auf den Link "Neues Telefonbuch".</li>
		</ol>
		
		<div class="columns">
		  <div class="column is-8 is-offset-2">
			<img alt="Anrufliste der Fritz!Box" class="image" data-tx="t0037:b9f34dc9" th:src="@{/assets/img/setup/02-navigate-to-addressbooks.png}"/>
		  </div>
		</div>
		
		<h2 data-tx="t0072:356d507a" id="create-token">Schritt 4: CardDAV-Token erzeugen</h2>

		<p data-tx="t0073:5843bc02">
			Für die Einrichtung in Deiner Fritz!Box benötigst Du ein spezielles CardDAV-Token als Passwort.
			Dieses Token dient nur der Verbindung zwischen Deiner Fritz!Box und PhoneBlock und kann
			jederzeit in den Einstellungen widerrufen werden.
		</p>

		<th:block th:if="${cardDavToken}">
			<p data-tx="t0074:9b72e482">
				<span class="tag is-success is-large"><i class="fa-solid fa-check"></i></span>
				Du hast bereits ein Token erstellt! Weiter zum nächsten Schritt.
			</p>
		</th:block>

		<th:block th:if="${userName} and ${!cardDavToken}">
			<p data-tx="t0075:ca529190">
				Erstelle jetzt ein Token für die Fritz!Box. Du kannst optional eine Bemerkung hinzufügen,
				um später zu wissen, wofür das Token verwendet wird (z.B. "Fritz!Box Wohnzimmer").
			</p>

			<form method="post" th:action="@{/update-settings(action='createToken', location='/setup#credentials')}">
				<input name="token-type" type="hidden" value="CARDDAV"/>
				<div class="field has-addons">
					<div class="control is-expanded">
						<input class="input" data-tx="t0049:fe053998" name="token-label" placeholder="Optional: Bemerkung (z.B. 'Fritz!Box Wohnzimmer')" type="text"/>
					</div>
					<div class="control">
						<button class="button is-primary" data-tx="t0050:21ce66dd" type="submit">
							<i class="fa-solid fa-key"></i> Token erzeugen
						</button>
					</div>
				</div>
			</form>
		</th:block>

		<p data-tx="t0051:9fe447a" th:unless="${userName}">
			Du musst Dich zuerst <a th:href="@{/login(location='/setup')}">anmelden</a>, um ein Token zu erzeugen.
		</p>

		<h2 data-tx="t0076:35997409" id="credentials">Schritt 5: Anmeldedaten in Fritz!Box eintragen</h2>

		<p data-tx="t0020:e4a227b8">
			Jetzt must Du die Anmeldedaten in die FRITZ!Box eintragen.
		</p>

		<ol>
			<li>
				<div data-tx="t0021:d5b1f48a">
					Gib dem Telefonbuch, das als Sperrliste dienen soll, den Namen <code dir="ltr">Blocklist</code>. Du benötigst diesen
					Namen nochmals für den nächsten Schritt.
				</div>
			</li>

			<li data-tx="t0022:32f6ec7">
				Wähle die Option <i>Telefonbuch eines Online-Anbieters nutzen</i> aus.
			</li>

			<li data-tx="t0023:d59c1b48">
				Wähle den Anbieter <i>CardDAV-Anbieter</i> aus.
			</li>

			<li>
				<div data-tx="t0079:c5926e14">Übertrage die Anmeldedaten (am besten mit Cut&amp;Paste, um Tippfehler zu vermeiden).</div>

				<ul>
					<li data-tx="t0080:d646341e">
						<span><i>Internetadresse des CardDAV-Servers</i>:</span>
						<code dir="ltr" id="url2" th:text="|https://phoneblock.net${contextPath}/contacts/|"></code><a class="copyToClipboard" data-tx="t0042:3f7efe41" href="#" id="url2_" title="In die Zwischenablage kopieren."><i class="fa-solid fa-copy"></i></a>
						(URL von des PhoneBlock-Adressbuchs)
					</li>

					<li>
						<i data-tx="t0081:548c40c1">Benutzername</i>: 
						
						<th:block data-tx="t0082:baafe4ec" th:if="${userName}">
							<code dir="ltr" id="login2" th:text="${userName}"></code><a class="copyToClipboard" data-tx="t0043:3f7efe41" href="#" id="login2_" title="In die Zwischenablage kopieren."><i class="fa-solid fa-copy"></i></a>
							(Dein PhoneBlock-Benutzername)
						</th:block>

						<th:block data-tx="t0083:c9c6fa56" th:unless="${userName}">
							Du musst Dich zuerst anmelden (siehe <a href="#register">Schritt 1</a>).
						</th:block>
					</li>

					<li>
						<span>
							<i data-tx="t0084:e99dee32">Passwort</i>:
						</span>
						
						<th:block data-tx="t0085:1d7c0447" th:if="${cardDavToken}">
							<code dir="ltr" id="passwd2" th:text="${cardDavToken.token}"></code><a class="copyToClipboard" data-tx="t0044:3f7efe41" href="#" id="passwd2_" title="In die Zwischenablage kopieren."><i class="fa-solid fa-copy"></i></a>
							(das Token aus Schritt 4)
						</th:block>
						
						<th:block data-tx="t0078:c657e130" th:unless="${cardDavToken}">
							Du musst zuerst ein Token erstellen (siehe <a href="#create-token">Schritt 4</a>).
						</th:block>
					</li>
				</ul>
			</li>

			<li data-tx="t0025:a4fb7bb8">
				Jetzt kannst Du die Anlage des neuen Telefonbuchs bestätigen. Bitte beachte: Wähle <b>keines Deiner Telefone</b>
				bei dem Punkt "Telefon-Zuordnung" aus! Ansonsten findest Du auf Deinem Telefon nur noch SPAM-Anrufer in den Kontakten.
			</li>
		</ol>

		<div class="columns">
		  <div class="column is-8 is-offset-2">
			<img alt="Neues Adressbuch anlegen" class="image" data-tx="t0038:50de9d04" th:src="@{/assets/img/setup/03-add-address-book.png}"/>
		  </div>
		</div>

		<h2 data-tx="t0068:49ed5643" id="verify">Schritt 6: Installation prüfen</h2>

		<p data-tx="t0027:6bd9c881">
			Wenn alles geklappt hat, dann hat Deine FRITZ!Box alle Nummer aus der PhoneBlock-Sperrliste geladen.
			Du müsstest jetzt ein neues Telefonbuch "Blocklist" in der Rubrik "Telefonie / Telefonbuch" haben.
			Wenn Du den Reiter "Blocklist" auswählst, kannst Du alle Nummern von aktuellen Spam-Anrufern sehen.
		</p>

		<div class="columns">
		  <div class="column is-8 is-offset-2">
			<img alt="Abgerufene Blocklist anzeigen" class="image" data-tx="t0039:3d7cbd9f" th:src="@{/assets/img/setup/04-check-blocklist.png}"/>
		  </div>
		</div>

		<h2 data-tx="t0069:16c40784" id="block">Schritt 7: Rufsperre aktivieren</h2>
		
		<p data-tx="t0029:ffbbaf55">
			In der Rubrik "Telefonie / Rufbehandlung" kannst Du jetzt das neue Telefonbuch "Blocklist" als zu
			sperrenden Rufnummernbereich festlegen. 
		</p>			
		
		<p data-tx="t0030:2d9a1437">
			Scrolle nach unten bis zu dem Unterpunkt "Rufnummernbereiche sperren" und klicke den Knopf 
			"Bereich hinzufügen".
		</p>

		<div class="columns">
		  <div class="column is-8 is-offset-2">
			<img alt="Neue Rufsperre hinzufügen" class="image" data-tx="t0040:e5649829" th:src="@{/assets/img/setup/05-add-blocklist.png}"/>
		  </div>
		</div>
		
		<p data-tx="t0031:56b8a409">
			In der neuen Maske, wähle die Option "Telefonbuch" in der Auswahl für "Bereich" und selektiere
			das neu angelegte Telefonbuch "Blocklist" als zu sperrendes "Telefonbuch".
		</p>

		<div class="columns">
		  <div class="column is-8 is-offset-2">
			<img alt="Anrufer mit Telefonnummer in der Blocklist sperren" class="image" data-tx="t0041:a8687137" th:src="@{/assets/img/setup/06-create-blocklist.png}"/>
		  </div>
		</div>
		
		<p data-tx="t0032:8943dc0d">
			Perfekt! Du hast die Einrichtung erledigt. Dein Telefon sollte jetzt deutlich weniger häufig wegen 
			eines unerwünschten Anrufers klingeln. Und wenn doch, dann kannst Du den 
			Störenfried ganz einfach für Dich und die ganze PhoneBlock-Community zum Schweigen bringen:
		</p>
		
		<div class="columns">
		  <div class="column is-half is-offset-one-quarter">
			<a th:href="@{/block}"><button class="button is-medium is-primary is-fullwidth" data-tx="t0033:fcebb7bf">Rufnummer sperren</button></a>
		  </div>
		</div>
	</div>
</section>

<div th:replace="~{fragments/page :: footer}"></div>
</body>
</html>